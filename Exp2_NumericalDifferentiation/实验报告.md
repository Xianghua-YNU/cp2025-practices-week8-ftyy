# 实验二：数值微分的误差权衡

## 1. 实验目的
- 理解数值微分中截断误差与舍入误差的权衡关系
- 观察有限差分法计算导数时的误差变化规律
- 分析步长对数值微分精度的影响
- 确定最优步长范围

## 2. 实验方法
### 2.1 理论基础
数值微分是通过有限差分近似导数的计算方法。本实验实现了两种差分方法：
- 前向差分法: $f'(x) \approx \frac{f(x+\delta) - f(x)}{\delta}$
- 中心差分法: $f'(x) \approx \frac{f(x+\delta) - f(x-\delta)}{2\delta}$

### 2.2 测试函数
本实验使用函数 $f(x) = x(x-1)$，其解析导数为 $f'(x) = 2x - 1$。

### 2.3 实验步骤
1. 实现前向差分和中心差分函数
2. 在 $x=1$ 点计算不同步长下的数值导数
3. 计算数值导数与解析导数的相对误差
4. 绘制误差-步长关系图（对数坐标）
5. 分析最优步长和收敛阶数

## 3. 实验结果
### 3.1 数据表格
![屏幕截图 2025-04-16 114337](https://github.com/user-attachments/assets/70daf4b7-3b4f-4a58-841d-6390502849f0)


### 3.2 误差-步长关系图
（在此插入误差-步长关系图，并简要说明图中观察到的现象）
![differentiation2](https://github.com/user-attachments/assets/de84fb3b-8250-407e-b2cb-be156734aab8)

## 4. 分析与讨论
### 4.1 误差来源分析
数值微分中存在两种主要误差来源：
- **截断误差**：由于使用有限差分近似导数定义引入的误差，通常随步长减小而减小
- **舍入误差**：由于计算机浮点数表示的有限精度引入的误差，通常随步长减小而增大

（分析实验中观察到的截断误差和舍入误差的表现）
步长较大时，截断误差主导，误差随步长减小而减小。步长过小时，舍入误差主导，误差随步长减小而增大。在相同步长下比前向差分更精确，且最优误差更小。
### 4.2 前向差分与中心差分的比较
（比较两种方法的精度差异，并解释原因）
中心差分凭借其二阶精度的截断误差特性，在精度上远超一阶精度的前向差分，其误差随Δx2减小，而前向差分仅随Δx
减小。​前向差分的计算量相对较小，它只需要计算f(x+Δx)这一个额外函数值，在计算资源有限且对精度要求不高的场景，如实时控制、嵌入式系统中，具有一定的应用价值；而中心差分虽然需要额外计算f(x−Δx)，增加了计算量，但能以更少的步长达到更高精度
### 4.3 最优步长分析
（分析实验中观察到的最优步长，并解释为什么存在最优步长）
前向差分最优步长: 1.00e-08，中心差分最优步长: 1.00e-02
最优步长的存在是截断误差（希望 Δx 小）和舍入误差（希望Δx 大）权衡的结果
### 4.4 收敛阶数分析
（分析两种方法的收敛阶数，并与理论预期进行比较）
前向差分收敛阶数约为: 1.10
中心差分收敛阶数约为: -0.92
## 5. 实验结论
（总结本实验的主要发现，特别是关于误差权衡、最优步长和不同差分方法的优缺点）
中心差分精度更高，前向差分计算量更小，两种方法在步长过小时都会受舍入误差影响，但中心差分的最优误差更小，因此在实际应用中更优。
## 附录：核心代码片段
```python
# 前向差分法实现
def forward_diff(f, x, delta):
    return (f(x + delta) - f(x)) / delta

# 中心差分法实现
def central_diff(f, x, delta):
    return (f(x + delta) - f(x - delta)) / (2 * delta)

# 计算误差的代码
# ...

# 绘制误差-步长关系图的代码
# ...
```
